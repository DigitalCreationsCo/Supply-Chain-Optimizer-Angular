<div class="header">
    <h1>Supply Chain Optimizer</h1>
    <p><strong>Report, optimize emissions and costs for your regional supply chains.</strong>
        <br />To get started, create a supply chain route using the form and press 'New Route'.
        <br /> Then, append more routes with 'New Route' or analyze with 'Save Routes'.</p>
</div>
<div class="dashboard">
    <app-input-form></app-input-form>

    <ng-container *ngIf="!isLoading; else loadingTemplate">
        <p style="margin:0 0 0 10px;">
            Supply Chain Routes
        </p>
        <ng-container 
        *ngIf="routes.length > 0; else noDataTemplate" 
        >
        <div class="dashboard-grid">
            <app-analytics-cards
            *ngFor="let analytics of supplyChainAnalytics"
            [supplyChainAnalytics]="analytics">
            </app-analytics-cards>
        </div>
        <div class="dashboard-grid">
            <app-results-visualization [route]="routes[0]"></app-results-visualization>
        </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <app-hotspots-table [route]="supplyChainAnalytics[0]"></app-hotspots-table>
            </div>

            <!-- <app-map-view [route]="routes[0]"></app-map-view> -->
        </ng-container>
    </ng-container>

    <ng-template #loadingTemplate>
        <div class="flex items-center justify-center p-8">
            <div class="text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mb-4"></div>
                <p class="text-gray-600">Loading routes...</p>
            </div>
        </div>
    </ng-template>

    <ng-template #noDataTemplate>
        <div class="flex items-center justify-center p-8">
            <div class="text-center">
                <p class="text-gray-600">No routes available. Please add a route using the form above.</p>
            </div>
        </div>
    </ng-template>
</div>
<div class="footer">
    <p class="caption">This application system is a work in progress, and is subject to change.</p>
    <p class="caption">
        Have feedback? Email Bryant at <a href="mailto:bryantmejia722&#64;outlook.com">bryantmejia722&#64;outlook.com</a>, or open an issue on the <a href="https://github.com/DigitalCreationsCo/Supply-Chain-Optimizer-Angular/issues">github repository</a>.
        <br/>
        Don't forget to connect on <a href="https://www.linkedin.com/in/bryant-mejia-085669331/">LinkedIn</a>.
        <br/>
        2024 Digital Creations Co. - Licensed under the MIT License.
    </p>
</div>